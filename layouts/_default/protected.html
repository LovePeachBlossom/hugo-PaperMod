{{- define "main" }}

<header class="page-header">
  {{- partial "breadcrumbs.html" . }}
  <h1>
    {{ .Title }}
    {{- if and (or (eq .Kind `term`) (eq .Kind `section`)) (.Param "ShowRssButtonInSectionTermList") }}
    {{- with .OutputFormats.Get "rss" }}
    <a href="{{ .RelPermalink }}" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
    {{- end }}
    {{- end }}
  </h1>
  {{- if .Description }}
  <div class="post-description">
    {{ .Description | markdownify }}
  </div>
  {{- end }}
  <div class="post-description" style="margin-top: 0.5rem;">
    <p style="color: var(--secondary); font-size: 0.9rem;">
      ğŸ’¡ è¿™äº›æ–‡ç« éœ€è¦è¾“å…¥å¯†ç æ‰èƒ½æŸ¥çœ‹å®Œæ•´å†…å®¹ã€‚ç‚¹å‡»æ–‡ç« æ ‡é¢˜è¿›å…¥æ–‡ç« é¡µé¢è¾“å…¥å¯†ç ã€‚
    </p>
  </div>
</header>

{{- /* ç­›é€‰æ‰€æœ‰æœ‰å¯†ç ä¿æŠ¤çš„æ–‡ç«  */}}
{{- $protectedPages := slice }}
{{- range site.RegularPages }}
  {{- if and (.Param "passwordHash") (ne (.Param "passwordHash") "") }}
    {{- $protectedPages = $protectedPages | append . }}
  {{- end }}
{{- end }}

{{- if $protectedPages }}

{{- range $index, $page := $protectedPages }}

{{- $class := "post-entry" }}

<article class="{{ $class }}" data-password-protected="true">
  {{- $isHidden := (.Param "cover.hiddenInList") | default (.Param "cover.hidden") | default false }}
  {{- partial "cover.html" (dict "cxt" . "IsSingle" false "isHidden" $isHidden) }}
  <header class="entry-header">
    <h2 class="entry-hint-parent">
      {{- .Title }}
      {{- if .Draft }}
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
      {{- end }}
      <span class="entry-hint" title="å¯†ç ä¿æŠ¤">ğŸ”’</span>
    </h2>
  </header>
  <div class="entry-content">
    <div style="background: var(--code-bg); padding: 12px; border-radius: 8px; border-left: 3px solid var(--primary); margin-bottom: 10px;">
      <p style="color: var(--secondary); font-size: 0.9rem; margin: 0;">
        ğŸ”’ æ­¤æ–‡ç« å—å¯†ç ä¿æŠ¤ï¼Œç‚¹å‡»æ ‡é¢˜è¿›å…¥æ–‡ç« é¡µé¢è¾“å…¥å¯†ç æŸ¥çœ‹å®Œæ•´å†…å®¹ã€‚
      </p>
    </div>
    {{- if (.Param "passwordHint") }}
    <p class="password-protect-notice">ğŸ’¡ å¯†ç æç¤ºï¼š{{ .Param "passwordHint" }}</p>
    {{- else }}
    <p class="password-protect-notice" style="opacity: 0.7; font-style: italic;">ğŸ’¡ æ­¤æ–‡ç« æœªè®¾ç½®å¯†ç æç¤º</p>
    {{- end }}
  </div>
  {{- if not (.Param "hideMeta") }}
  <footer class="entry-footer">
    {{- partial "post_meta.html" . -}}
  </footer>
  {{- end }}
  <a class="entry-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}"></a>
</article>
{{- end }}

{{- else }}
<div class="post-content">
  <p style="text-align: center; color: var(--secondary); padding: 2rem;">
    ç›®å‰è¿˜æ²¡æœ‰å¯†ç ä¿æŠ¤çš„æ–‡ç« ã€‚
  </p>
</div>
{{- end }}

{{- end }}{{- /* end main */ -}}

